<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>geolocation</title>
</head>
<body>

	<div></div>
	
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.1.min.js"> </script>
	<script type="text/javascript">
	var gels = [];
	
	$(function () {

		set_log("init");

		if (window.navigator.geolocation==undefined) {
			set_log("此瀏覽器不支援地理定位功能!");
			
		} else {
			set_log("此瀏覽器支援地理定位功能!");
			var geolocation=window.navigator.geolocation; //取得 Geolocation 物件
			
			geolocation.getCurrentPosition(success, error);
		}
		
		function success(position, coordinates) {
			set_log(position.coords);
			set_log(position.timestamp);
			set_log(coordinates.latitude);
			set_log(coordinates.longitude);
			set_log(coordinates.altitude);
			set_log(coordinates.accuracy);
			set_log(coordinates.altitudeAccuracy);
			set_log(coordinates.heading);
			set_log(coordinates.speed);
		}
		
		function error(positionerror) {
		
			var errorTypes={
				0:"不明原因錯誤",
				1:"使用者拒絕提供位置資訊",
				2:"無法取得位置資訊",
				3:"位置查詢逾時"
            };
			
			set_log(errorTypes[positionerror.code]);
			set_log(positionerror.code);
			set_log(positionerror.message);
		}
		
		function set_log(msg) {

			$("div").append(msg + "<br />");
			console.log(msg);
			return false;
		}

	});	

	</script>
</body>
</html>